<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Station | هيلث ستيشن</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="website icon" type="png" href="icon.png">
    <style>
        :root {
            --primary: #2E7D32;
            --secondary: #1565C0;
            --accent: #FF8F00;
            --light: #f8f9fa;
            --dark: #212529;
            --text: #495057;
            --border: #dee2e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text);
            line-height: 1.6;
            background-color: var(--light);
        }
        
        body[dir="rtl"] {
            font-family: 'Tajawal', Arial, sans-serif;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: relative;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .translate-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .translate-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }
        
        nav {
            background-color: var(--dark);
            padding: 0.75rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        nav ul {
            display: flex;
            justify-content: center;
            list-style: none;
            padding: 0;
            margin: 0;
            gap: 1rem;
        }
        
        body[dir="rtl"] nav ul {
            flex-direction: row-reverse;
        }
        
        nav li {
            margin: 0;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1.25rem;
            border-radius: 20px;
            transition: all 0.3s;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        nav a:hover {
            background-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1.5rem;
        }
        
        body[dir="rtl"] .social-media {
            flex-direction: row-reverse;
        }

        section {
            margin: 2.5rem 0;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            background-color: white;
            border: 1px solid var(--border);
        }
        
        h1, h2, h3 {
            color: var(--primary);
            margin-bottom: 1rem;
        }
        
        h2 {
            font-size: 1.75rem;
            border-bottom: 2px solid var(--border);
            padding-bottom: 0.5rem;
        }
        
        .calculator-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.25rem;
        }
        
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.2);
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 0.85rem 1.75rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        button:hover {
            background-color: #1B5E20;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        button:active {
            transform: translateY(0);
        }
        
        .result {
            background-color: rgba(46, 125, 50, 0.05);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            display: none;
            border-left: 4px solid var(--primary);
        }
        
        .result h3 {
            margin-top: 0;
        }
        
        .meal-plan, .workout-plan {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .meal-card, .workout-card {
            background-color: white;
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            border: 1px solid var(--border);
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
        }
        
        .meal-card:hover, .workout-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        
        .meal-card h3, .workout-card h3 {
            margin-top: 0;
            color: var(--secondary);
            font-size: 1.25rem;
            margin-bottom: 0.75rem;
        }
        
        .meal-card p, .workout-card p {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }
        
        .tab-container {
            margin-top: 1.5rem;
        }
        
        .tab-buttons {
            display: flex;
            border-bottom: 1px solid var(--border);
            gap: 0.5rem;
            overflow-x: auto;
            padding-bottom: 2px;
        }
        
        body[dir="rtl"] .tab-buttons {
            flex-direction: row-reverse;
        }
        
        .tab-btn {
            padding: 0.75rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--text);
            border-bottom: 3px solid transparent;
            font-weight: 600;
            white-space: nowrap;
            transition: all 0.3s;
            border-radius: 6px 6px 0 0;
        }
        
        .tab-btn:hover {
            background-color: rgba(0,0,0,0.05);
        }
        
        .tab-btn.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
            background-color: rgba(46, 125, 50, 0.1);
        }
        
        .tab-content {
            display: none;
            padding: 1.5rem 0 0;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            text-align: center;
            padding: 1.5rem;
            margin-top: 3rem;
        }
        
        /* New styles for enhanced details */
        .meal-details, .workout-details {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px dashed var(--border);
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        
        .detail-label {
            font-weight: 600;
            color: var(--dark);
        }
        
        .health-tag {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background-color: var(--primary);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        body[dir="rtl"] .health-tag {
            right: auto;
            left: 1rem;
        }
        
        .intensity-indicator {
            display: flex;
            margin-top: 0.5rem;
        }
        
        .intensity-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 4px;
            background-color: #e0e0e0;
        }
        
        body[dir="rtl"] .intensity-dot {
            margin-right: 0;
            margin-left: 4px;
        }
        
        .intensity-dot.filled {
            background-color: var(--accent);
        }
        
        .exercise-list {
            margin-top: 1rem;
        }
        
        .exercise-item {
            margin-bottom: 0.75rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }
        
        .exercise-name {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        
        .exercise-details {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: var(--text);
        }
        
        .footer-content {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .social-media {
                display: flex;
                gap: 1.5rem;
                margin-top: 1rem;
            }

            .social-media a {
                color: white;
                font-size: 1.5rem;
                transition: transform 0.3s;
            }

            .social-media a:hover {
                transform: translateY(-3px);
            }

            .icon-link {
                color: #fff;
                margin: 0 10px;
                font-size: 20px;
                transition: color 0.3s ease;
            }

            .icon-link:hover {
                color: #2E7D32; 
            }

            
        @media (max-width: 768px) {
            nav ul {
                flex-wrap: wrap;
            }
            
            body[dir="rtl"] nav ul {
                flex-wrap: wrap;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            section {
                padding: 1.25rem;
            }
            
            .meal-plan, .workout-plan {
                grid-template-columns: 1fr;
            }
            
            .exercise-details {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
        }
    </style>
</head>
<body>
    <header>
        <h1 id="headerTitle">Health Station</h1>
        <button class="translate-btn" id="translateBtn">العربية</button>
    </header>
    
    <nav>
        <ul>
            <li><a href="#calorie-calculator" data-translate="calorieTitle">Calorie Calculator</a></li>
            <li><a href="#meal-plans" data-translate="mealPlans">Meal Plans</a></li>
            <li><a href="#workout-plans" data-translate="workoutPlans">Workout Plans</a></li>
            <li><a href="#hydration" data-translate="hydration">Hydration</a></li>
        </ul>
    </nav>
    
    <div class="container">
        <section id="calorie-calculator">
            <h2 data-translate="calorieTitle">Daily Calorie Needs Calculator</h2>
            <form class="calculator-form" id="calorieForm">
                <div class="form-group">
                    <label for="gender" data-translate="gender">Gender</label>
                    <select id="gender" required>
                        <option value="" data-translate="select">Select</option>
                        <option value="male" data-translate="male">Male</option>
                        <option value="female" data-translate="female">Female</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="age" data-translate="age">Age (years)</label>
                    <input type="number" id="age" min="15" max="100" required>
                </div>
                
                <div class="form-group">
                    <label for="weight" data-translate="weight">Weight (kg)</label>
                    <input type="number" id="weight" min="30" max="200" required>
                </div>
                
                <div class="form-group">
                    <label for="height" data-translate="height">Height (cm)</label>
                    <input type="number" id="height" min="100" max="250" required>
                </div>
                
                <div class="form-group">
                    <label for="activity" data-translate="activity">Activity Level</label>
                    <select id="activity" required>
                        <option value="" data-translate="select">Select</option>
                        <option value="1.2" data-translate="sedentary">Sedentary (little or no exercise)</option>
                        <option value="1.375" data-translate="lightlyActive">Lightly active (light exercise 1-3 days/week)</option>
                        <option value="1.55" data-translate="moderatelyActive">Moderately active (moderate exercise 3-5 days/week)</option>
                        <option value="1.725" data-translate="veryActive">Very active (hard exercise 6-7 days/week)</option>
                        <option value="1.9" data-translate="extraActive">Extra active (very hard exercise & physical job)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="goal" data-translate="goal">Goal</label>
                    <select id="goal" required>
                        <option value="" data-translate="select">Select</option>
                        <option value="maintain" data-translate="maintain">Maintain weight</option>
                        <option value="lose" data-translate="lose">Lose weight</option>
                        <option value="gain" data-translate="gain">Gain weight</option>
                    </select>
                </div>
                
                <button type="submit" data-translate="calculate">Calculate</button>
            </form>
            
            <div class="result" id="calorieResult">
                <h3 data-translate="calorieResult">Your Daily Calorie Needs</h3>
                <p id="calorieValue"></p>
                <p id="calorieExplanation"></p>
            </div>
        </section>
        
        <section id="meal-plans">
            <h2 data-translate="mealPlans">Meal Plans</h2>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="breakfast" data-translate="breakfast">Breakfast</button>
                    <button class="tab-btn" data-tab="lunch" data-translate="lunch">Lunch</button>
                    <button class="tab-btn" data-tab="dinner" data-translate="dinner">Dinner</button>
                </div>
                
                <div class="tab-content active" id="breakfast">
                    <div class="meal-plan">
                        <!-- Breakfast meals will be inserted here by JavaScript -->
                    </div>
                </div>
                
                <div class="tab-content" id="lunch">
                    <div class="meal-plan">
                        <!-- Lunch meals will be inserted here by JavaScript -->
                    </div>
                </div>
                
                <div class="tab-content" id="dinner">
                    <div class="meal-plan">
                        <!-- Dinner meals will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </section>
        
        <section id="workout-plans">
            <h2 data-translate="workoutPlans">Workout Plans</h2>
            
            <div class="tab-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="beginner" data-translate="beginner">Beginner</button>
                    <button class="tab-btn" data-tab="intermediate" data-translate="intermediate">Intermediate</button>
                    <button class="tab-btn" data-tab="advanced" data-translate="advanced">Advanced</button>
                </div>
                
                <div class="tab-content active" id="beginner">
                    <div class="workout-plan">
                        <!-- Beginner workout will be inserted here by JavaScript -->
                    </div>
                </div>
                
                <div class="tab-content" id="intermediate">
                    <div class="workout-plan">
                        <!-- Intermediate workout will be inserted here by JavaScript -->
                    </div>
                </div>
                
                <div class="tab-content" id="advanced">
                    <div class="workout-plan">
                        <!-- Advanced workout will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </section>
        
        <section id="hydration">
            <h2 data-translate="hydration">Daily Water Intake</h2>
            <p data-translate="hydrationDesc">Proper hydration is essential for optimal health and fitness performance.</p>
            
            <div class="calculator-form">
                <div class="form-group">
                    <label for="water-weight" data-translate="waterWeight">Your Weight (kg)</label>
                    <input type="number" id="water-weight" min="30" max="200">
                </div>
                
                <button id="calculateWater" data-translate="calculateWater">Calculate Water Needs</button>
            </div>
            
            <div class="result" id="waterResult">
                <h3 data-translate="waterResult">Your Daily Water Needs</h3>
                <p id="waterValue"></p>
                <p id="waterExplanation"></p>
            </div>
            
            <h3 data-translate="hydrationTips">Hydration Tips</h3>
            <ul>
                <li data-translate="tip1">Start your day with a glass of water</li>
                <li data-translate="tip2">Drink water before, during, and after exercise</li>
                <li data-translate="tip3">Monitor your urine color - pale yellow is ideal</li>
                <li data-translate="tip4">Increase intake in hot weather or when sweating</li>
                <li data-translate="tip5">Don't wait until you're thirsty to drink water</li>
            </ul>
        </section>
    </div>

    <footer>
        <div class="footer-content">
            <p data-translate="footer">We do not allow or permit the use of the site for non-subscribers.</p>
            <div class="social-media">
                <a href="https://www.instagram.com/health.station25" class="icon-link" target="_blank" aria-label="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.tiktok.com/@health.station25" class="icon-link" target="_blank" aria-label="TikTok">
                    <i class="fab fa-tiktok"></i>
                </a>
            </div>
        </div>
    </footer>
    
    <script>
        // Enhanced translation data with new terms
        const translations = {
            en: {
                title: "Health Station",
                calculate: "Calculate",
                calorieTitle: "Daily Calorie Needs Calculator",
                gender: "Gender",
                male: "Male",
                female: "Female",
                age: "Age (years)",
                weight: "Weight (kg)",
                height: "Height (cm)",
                activity: "Activity Level",
                goal: "Goal",
                select: "Select",
                sedentary: "Sedentary (little or no exercise)",
                lightlyActive: "Lightly active (light exercise 1-3 days/week)",
                moderatelyActive: "Moderately active (moderate exercise 3-5 days/week)",
                veryActive: "Very active (hard exercise 6-7 days/week)",
                extraActive: "Extra active (very hard exercise & physical job)",
                maintain: "Maintain weight",
                lose: "Lose weight",
                gain: "Gain weight",
                calorieResult: "Your Daily Calorie Needs",
                mealPlans: "Meal Plans",
                workoutPlans: "Workout Plans",
                hydration: "Daily Water Intake",
                hydrationDesc: "Proper hydration is essential for optimal health and fitness performance.",
                calculateWater: "Calculate Water Needs",
                waterWeight: "Your Weight (kg)",
                waterResult: "Your Daily Water Needs",
                hydrationTips: "Hydration Tips",
                tip1: "Start your day with a glass of water",
                tip2: "Drink water before, during, and after exercise",
                tip3: "Monitor your urine color - pale yellow is ideal",
                tip4: "Increase intake in hot weather or when sweating",
                tip5: "Don't wait until you're thirsty to drink water",
                breakfast: "Breakfast",
                lunch: "Lunch",
                dinner: "Dinner",
                beginner: "Beginner",
                intermediate: "Intermediate",
                advanced: "Advanced",
                footer: "We do not allow or permit the use of the site for non-subscribers.",
                // New translations
                prepTime: "Prep Time",
                cookTime: "Cook Time",
                servings: "Servings",
                ingredients: "Ingredients",
                nutrition: "Nutrition Info",
                protein: "Protein",
                carbs: "Carbs",
                fats: "Fats",
                fiber: "Fiber",
                healthy: "Healthy",
                veryHealthy: "Very Healthy",
                balanced: "Balanced",
                workout: "Workout",
                exercises: "Exercises",
                setsReps: "Sets/Reps",
                rest: "Rest",
                intensity: "Intensity",
                low: "Low",
                medium: "Medium",
                high: "High",
                calories: "Calories",
                notes: "Notes"
            },
            ar: {
                title: "هيلث ستيشن",
                calculate: "احسب",
                calorieTitle: "حاسبة السعرات الحرارية اليومية",
                gender: "الجنس",
                male: "ذكر",
                female: "أنثى",
                age: "العمر (سنوات)",
                weight: "الوزن (كجم)",
                height: "الطول (سم)",
                activity: "مستوى النشاط",
                goal: "الهدف",
                select: "اختر",
                sedentary: "قليل الحركة (لا تمارين أو قليل جداً)",
                lightlyActive: "نشاط خفيف (تمارين خفيفة 1-3 أيام في الأسبوع)",
                moderatelyActive: "نشاط متوسط (تمارين متوسطة 3-5 أيام في الأسبوع)",
                veryActive: "نشيط جداً (تمارين قوية 6-7 أيام في الأسبوع)",
                extraActive: "نشاط مكثف (تمارين قوية جداً وعمل بدني)",
                maintain: "الحفاظ على الوزن",
                lose: "فقدان الوزن",
                gain: "زيادة الوزن",
                calorieResult: "احتياجاتك اليومية من السعرات الحرارية",
                mealPlans: "خطط الوجبات",
                workoutPlans: "خطط التمارين",
                hydration: "احتياجات الماء اليومية",
                hydrationDesc: "الترطيب المناسب ضروري لصحة مثالية وأداء رياضي أفضل.",
                calculateWater: "احسب احتياجات الماء",
                waterWeight: "وزنك (كجم)",
                waterResult: "احتياجاتك اليومية من الماء",
                hydrationTips: "نصائح للترطيب",
                tip1: "ابدأ يومك بكوب من الماء",
                tip2: "اشرب الماء قبل وأثناء وبعد التمارين",
                tip3: "راقب لون البول - الأصفر الفاتح هو المثالي",
                tip4: "زود الكمية في الطقس الحار أو عند التعرق",
                tip5: "لا تنتظر حتى تشعر بالعطش لشرب الماء",
                breakfast: "الفطور",
                lunch: "الغداء",
                dinner: "العشاء",
                beginner: "مبتدئ",
                intermediate: "متوسط",
                advanced: "متقدم",
                footer: "لا نسمح ولا نحلل استخدام الموقع لغير المشتركين",
                // New translations
                prepTime: "وقت التحضير",
                cookTime: "وقت الطهي",
                servings: "حصص",
                ingredients: "المكونات",
                nutrition: "المعلومات الغذائية",
                protein: "بروتين",
                carbs: "كربوهيدرات",
                fats: "دهون",
                fiber: "ألياف",
                healthy: "صحي",
                veryHealthy: "صحي جداً",
                balanced: "متوازن",
                workout: "التمرين",
                exercises: "تمارين",
                setsReps: "مجموعات/تكرارات",
                rest: "راحة",
                intensity: "الشدة",
                low: "منخفضة",
                medium: "متوسطة",
                high: "عالية",
                calories: "السعرات الحرارية",
                notes: "ملاحظات"
            }
        };

        // Current language
        let currentLang = 'en';

        // Load saved user data from localStorage
        function loadUserData() {
            const savedData = localStorage.getItem('fitnessUserData');
            if (savedData) {
                const data = JSON.parse(savedData);
                document.getElementById('gender').value = data.gender || '';
                document.getElementById('age').value = data.age || '';
                document.getElementById('weight').value = data.weight || '';
                document.getElementById('height').value = data.height || '';
                document.getElementById('activity').value = data.activity || '';
                document.getElementById('goal').value = data.goal || '';
                document.getElementById('water-weight').value = data.waterWeight || '';
                
                if (data.calories) {
                    document.getElementById('calorieValue').textContent = currentLang === 'en'
                        ? `You need approximately ${data.calories} calories per day.`
                        : `تحتاج تقريباً ${data.calories} سعرة حرارية يومياً.`;
                    document.getElementById('calorieExplanation').textContent = data.explanation;
                    document.getElementById('calorieResult').style.display = 'block';
                    generateMealPlans(data.calories);
                }
                
                if (data.waterNeeds) {
                    document.getElementById('waterValue').textContent = currentLang === 'en'
                        ? `You need approximately ${data.waterNeeds}ml (${data.waterNeeds/1000} liters) of water per day.`
                        : `تحتاج تقريباً ${data.waterNeeds} مل (${data.waterNeeds/1000} لتر) من الماء يومياً.`;
                    document.getElementById('waterExplanation').textContent = data.waterExplanation;
                    document.getElementById('waterResult').style.display = 'block';
                }
            }
        }

        // Save user data to localStorage
        function saveUserData() {
            const userData = {
                gender: document.getElementById('gender').value,
                age: document.getElementById('age').value,
                weight: document.getElementById('weight').value,
                height: document.getElementById('height').value,
                activity: document.getElementById('activity').value,
                goal: document.getElementById('goal').value,
                waterWeight: document.getElementById('water-weight').value,
                calories: document.getElementById('calorieValue').textContent.match(/\d+/)?.[0],
                explanation: document.getElementById('calorieExplanation').textContent,
                waterNeeds: document.getElementById('waterValue').textContent.match(/\d+/)?.[0],
                waterExplanation: document.getElementById('waterExplanation').textContent,
                lang: currentLang
            };
            localStorage.setItem('fitnessUserData', JSON.stringify(userData));
        }

        // Toggle translation
        document.getElementById('translateBtn').addEventListener('click', function() {
            currentLang = currentLang === 'en' ? 'ar' : 'en';
            translatePage();
            
            // Change button text
            this.textContent = currentLang === 'en' ? 'العربية' : 'English';
            
            // Change direction
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
            
            // Change title
            document.getElementById('headerTitle').textContent = translations[currentLang]['title'];
            
            // Save language preference
            saveUserData();
        });

        // Translate the page
        function translatePage() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(el => {
                const key = el.getAttribute('data-translate');
                if (translations[currentLang][key]) {
                    el.textContent = translations[currentLang][key];
                }
            });
            
            // Translate select options
            const genderSelect = document.getElementById('gender');
            genderSelect.options[1].text = translations[currentLang]['male'];
            genderSelect.options[2].text = translations[currentLang]['female'];
            
            const activitySelect = document.getElementById('activity');
            activitySelect.options[1].text = translations[currentLang]['sedentary'];
            activitySelect.options[2].text = translations[currentLang]['lightlyActive'];
            activitySelect.options[3].text = translations[currentLang]['moderatelyActive'];
            activitySelect.options[4].text = translations[currentLang]['veryActive'];
            activitySelect.options[5].text = translations[currentLang]['extraActive'];
            
            const goalSelect = document.getElementById('goal');
            goalSelect.options[1].text = translations[currentLang]['maintain'];
            goalSelect.options[2].text = translations[currentLang]['lose'];
            goalSelect.options[3].text = translations[currentLang]['gain'];
            
            // Translate tab buttons
            document.querySelector('[data-tab="breakfast"]').textContent = translations[currentLang]['breakfast'];
            document.querySelector('[data-tab="lunch"]').textContent = translations[currentLang]['lunch'];
            document.querySelector('[data-tab="dinner"]').textContent = translations[currentLang]['dinner'];
            document.querySelector('[data-tab="beginner"]').textContent = translations[currentLang]['beginner'];
            document.querySelector('[data-tab="intermediate"]').textContent = translations[currentLang]['intermediate'];
            document.querySelector('[data-tab="advanced"]').textContent = translations[currentLang]['advanced'];
            
            // Translate any generated content
            if (document.getElementById('calorieValue').textContent) {
                const calories = document.getElementById('calorieValue').textContent.match(/\d+/)?.[0];
                document.getElementById('calorieValue').textContent = currentLang === 'en'
                    ? `You need approximately ${calories} calories per day.`
                    : `تحتاج تقريباً ${calories} سعرة حرارية يومياً.`;
            }
            
            if (document.getElementById('waterValue').textContent) {
                const water = document.getElementById('waterValue').textContent.match(/\d+/)?.[0];
                document.getElementById('waterValue').textContent = currentLang === 'en'
                    ? `You need approximately ${water}ml (${water/1000} liters) of water per day.`
                    : `تحتاج تقريباً ${water} مل (${water/1000} لتر) من الماء يومياً.`;
            }
            
            // Regenerate meal and workout plans to translate them
            const savedData = localStorage.getItem('fitnessUserData');
            if (savedData) {
                const data = JSON.parse(savedData);
                if (data.calories) {
                    generateMealPlans(data.calories);
                }
                generateWorkoutPlans();
            }
        }

        // Calorie Calculator
        document.getElementById('calorieForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const gender = document.getElementById('gender').value;
            const age = parseFloat(document.getElementById('age').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const height = parseFloat(document.getElementById('height').value);
            const activity = parseFloat(document.getElementById('activity').value);
            const goal = document.getElementById('goal').value;
            
            // Calculate BMR (Basal Metabolic Rate)
            let bmr;
            if (gender === 'male') {
                bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
            } else {
                bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
            }
            
            // Calculate TDEE (Total Daily Energy Expenditure)
            let tdee = bmr * activity;
            
            // Adjust based on goal
            let explanation = "";
            if (goal === 'lose') {
                tdee -= 500;
                explanation = currentLang === 'en' 
                    ? "This is a 500 calorie deficit for gradual weight loss (about 0.5kg per week)."
                    : "هذا عجز 500 سعرة حرارية لفقدان الوزن التدريجي (حوالي 0.5 كجم في الأسبوع).";
            } else if (goal === 'gain') {
                tdee += 500;
                explanation = currentLang === 'en' 
                    ? "This is a 500 calorie surplus for gradual weight gain (about 0.5kg per week)."
                    : "هذا فائض 500 سعرة حرارية لزيادة الوزن التدريجي (حوالي 0.5 كجم في الأسبوع).";
            } else {
                explanation = currentLang === 'en' 
                    ? "This maintains your current weight based on your activity level."
                    : "هذا يحافظ على وزنك الحالي بناءً على مستوى نشاطك.";
            }
            
            // Display result
            document.getElementById('calorieValue').textContent = currentLang === 'en'
                ? `You need approximately ${Math.round(tdee)} calories per day.`
                : `تحتاج تقريباً ${Math.round(tdee)} سعرة حرارية يومياً.`;
            document.getElementById('calorieExplanation').textContent = explanation;
            document.getElementById('calorieResult').style.display = 'block';
            
            // Save to localStorage
            saveUserData();
            
            // Generate meal plans based on calories
            generateMealPlans(Math.round(tdee));
        });

        // Water Calculator
        document.getElementById('calculateWater').addEventListener('click', function() {
            const weight = parseFloat(document.getElementById('water-weight').value);
            
            if (isNaN(weight)) {
                alert(currentLang === 'en' ? "Please enter your weight" : "الرجاء إدخال وزنك");
                return;
            }
            
            // Calculate water needs (35ml per kg of body weight)
            const waterNeeds = Math.round(weight * 35 / 100) * 100;
            
            document.getElementById('waterValue').textContent = currentLang === 'en'
                ? `You need approximately ${waterNeeds}ml (${waterNeeds/1000} liters) of water per day.`
                : `تحتاج تقريباً ${waterNeeds} مل (${waterNeeds/1000} لتر) من الماء يومياً.`;
            document.getElementById('waterExplanation').textContent = currentLang === 'en'
                ? "This is based on 35ml of water per kg of body weight. Increase intake if you're active or in hot climates."
                : "هذا يعتمد على 35 مل من الماء لكل كجم من وزن الجسم. زد الكمية إذا كنت نشطاً أو في مناخ حار.";
            document.getElementById('waterResult').style.display = 'block';
            
            // Save to localStorage
            saveUserData();
        });

        // Tab functionality
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // Hide all tab contents
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                // Deactivate all tab buttons
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // Activate current tab
                document.getElementById(tabId).classList.add('active');
                this.classList.add('active');
            });
        });

        // Enhanced Meal data with more details
        const meals = {
            breakfast: [
                { 
                    name: { en: "Greek Yogurt with Berries", ar: "زبادي يوناني مع توت" }, 
                    calories: 250, 
                    prepTime: 5,
                    cookTime: 0,
                    servings: 1,
                    ingredients: {
                        en: ["1 cup Greek yogurt", "½ cup mixed berries", "1 tbsp honey", "1 tbsp chopped nuts"],
                        ar: ["1 كوب زبادي يوناني", "½ كوب توت متنوع", "1 ملعقة كبيرة عسل", "1 ملعقة كبيرة مكسرات مقطعة"]
                    },
                    nutrition: {
                        protein: 20,
                        carbs: 25,
                        fats: 8,
                        fiber: 4
                    },
                    healthRating: 5, // 1-5 scale
                    desc: { 
                        en: "Greek yogurt with mixed berries and a drizzle of honey. High in protein and antioxidants.", 
                        ar: "زبادي يوناني مع توت متنوع وقطرات من العسل. غني بالبروتين ومضادات الأكسدة." 
                    } 
                },
                { 
                    name: { en: "Avocado Toast", ar: "توست أفوكادو" }, 
                    calories: 300, 
                    prepTime: 10,
                    cookTime: 5,
                    servings: 1,
                    ingredients: {
                        en: ["1 slice whole grain bread", "½ avocado", "1 egg", "5 cherry tomatoes", "Salt & pepper"],
                        ar: ["1 شريحة خبز توست كامل", "½ حبة أفوكادو", "1 بيضة", "5 حبات طماطم كرزية", "ملح وفلفل"]
                    },
                    nutrition: {
                        protein: 12,
                        carbs: 30,
                        fats: 15,
                        fiber: 8
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Whole grain toast with mashed avocado, cherry tomatoes, and poached egg. Packed with healthy fats and fiber.", 
                        ar: "خبز توست كامل مع أفوكادو مهروس وطماطم كرزية وبيض مسلوق. غني بالدهون الصحية والألياف." 
                    } 
                },
                // Additional breakfast options with similar detailed structure
                { 
                    name: { en: "Oatmeal with Nuts", ar: "شوفان مع مكسرات" }, 
                    calories: 350, 
                    prepTime: 2,
                    cookTime: 10,
                    servings: 1,
                    ingredients: {
                        en: ["½ cup rolled oats", "1 cup milk or water", "1 tbsp almonds", "1 tbsp walnuts", "½ tsp cinnamon"],
                        ar: ["½ كوب شوفان", "1 كوب حليب أو ماء", "1 ملعقة كبيرة لوز", "1 ملعقة كبيرة جوز", "½ ملعقة صغيرة قرفة"]
                    },
                    nutrition: {
                        protein: 12,
                        carbs: 45,
                        fats: 12,
                        fiber: 7
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Steel-cut oats with almonds, walnuts, and cinnamon. Great source of complex carbs and omega-3s.", 
                        ar: "شوفان قطع مع لوز وجوز وقرفة. مصدر رائع للكربوهيدرات المعقدة وأوميغا 3." 
                    } 
                },
                { 
                    name: { en: "Smoothie Bowl", ar: "وعاء سموذي" }, 
                    calories: 400, 
                    prepTime: 10,
                    cookTime: 0,
                    servings: 1,
                    ingredients: {
                        en: ["1 banana", "½ cup mixed berries", "1 cup spinach", "1 scoop protein powder", "1 tbsp granola"],
                        ar: ["1 موز", "½ كوب توت متنوع", "1 كوب سبانخ", "1 سكوب مسحوق بروتين", "1 ملعقة كبيرة غرانولا"]
                    },
                    nutrition: {
                        protein: 25,
                        carbs: 55,
                        fats: 8,
                        fiber: 10
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Blended fruits with spinach, protein powder, and granola topping. Nutrient-dense and refreshing.", 
                        ar: "فواكه ممزوجة مع سبانخ ومسحوق بروتين وغرانولا. غني بالمغذيات ومنعش." 
                    } 
                },
                { 
                    name: { en: "Scrambled Eggs with Veggies", ar: "بيض مخفوق مع خضار" }, 
                    calories: 320, 
                    prepTime: 10,
                    cookTime: 10,
                    servings: 1,
                    ingredients: {
                        en: ["2 eggs", "¼ bell pepper", "¼ onion", "½ cup spinach", "1 tsp olive oil"],
                        ar: ["2 بيضة", "¼ حبة فلفل رومي", "¼ حبة بصل", "½ كوب سبانخ", "1 ملعقة صغيرة زيت زيتون"]
                    },
                    nutrition: {
                        protein: 18,
                        carbs: 10,
                        fats: 22,
                        fiber: 3
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Eggs scrambled with bell peppers, onions, and spinach. High-protein breakfast with veggies.", 
                        ar: "بيض مخفوق مع فلفل رومي وبصل وسبانخ. إفطار غني بالبروتين مع خضار." 
                    } 
                }
            ],
            lunch: [
                { 
                    name: { en: "Grilled Chicken Salad", ar: "سلطة دجاج مشوي" }, 
                    calories: 400, 
                    prepTime: 15,
                    cookTime: 15,
                    servings: 1,
                    ingredients: {
                        en: ["1 chicken breast", "2 cups mixed greens", "½ cucumber", "10 cherry tomatoes", "2 tbsp vinaigrette"],
                        ar: ["1 صدر دجاج", "2 كوب خضروات متنوعة", "½ خيار", "10 حبة طماطم كرزية", "2 ملعقة كبيرة تتبيلة"]
                    },
                    nutrition: {
                        protein: 35,
                        carbs: 15,
                        fats: 20,
                        fiber: 6
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Mixed greens with grilled chicken, vegetables, and vinaigrette. Light yet satisfying meal.", 
                        ar: "خضروات متنوعة مع دجاج مشوي وخضار وتتبيلة. وجبة خفيفة لكن مشبعة." 
                    } 
                },
                { 
                    name: { en: "Quinoa Bowl", ar: "وعاء كينوا" }, 
                    calories: 450, 
                    prepTime: 10,
                    cookTime: 20,
                    servings: 1,
                    ingredients: {
                        en: ["½ cup cooked quinoa", "½ cup roasted vegetables", "¼ cup chickpeas", "1 tbsp tahini", "1 tsp lemon juice"],
                        ar: ["½ كوب كينوا مطبوخة", "½ كوب خضار محمصة", "¼ كوب حمص", "1 ملعقة كبيرة طحينة", "1 ملعقة صغيرة عصير ليمون"]
                    },
                    nutrition: {
                        protein: 18,
                        carbs: 55,
                        fats: 15,
                        fiber: 12
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Quinoa with roasted vegetables, chickpeas, and tahini dressing. Plant-based protein powerhouse.", 
                        ar: "كينوا مع خضار محمصة وحمص وتتبيلة طحينة. وجبة نباتية غنية بالبروتين." 
                    } 
                },
                // Additional lunch options with similar detailed structure
                { 
                    name: { en: "Turkey Wrap", ar: "لفافة ديك رومي" }, 
                    calories: 380, 
                    prepTime: 10,
                    cookTime: 0,
                    servings: 1,
                    ingredients: {
                        en: ["1 whole wheat wrap", "3 slices turkey breast", "¼ avocado", "½ cup mixed greens", "1 tbsp hummus"],
                        ar: ["1 لفافة قمح كامل", "3 شرائح صدر ديك رومي", "¼ أفوكادو", "½ كوب خضروات متنوعة", "1 ملعقة كبيرة حمص"]
                    },
                    nutrition: {
                        protein: 25,
                        carbs: 35,
                        fats: 15,
                        fiber: 8
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Whole wheat wrap with turkey, avocado, and vegetables. Portable and balanced meal.", 
                        ar: "لفافة قمح كامل مع ديك رومي وأفوكادو وخضار. وجبة متوازنة وسهلة الحمل." 
                    } 
                },
                { 
                    name: { en: "Lentil Soup", ar: "شوربة عدس" }, 
                    calories: 350, 
                    prepTime: 10,
                    cookTime: 30,
                    servings: 1,
                    ingredients: {
                        en: ["½ cup lentils", "1 carrot", "1 celery stalk", "½ onion", "2 cups vegetable broth"],
                        ar: ["½ كوب عدس", "1 جزر", "1 ساق كرفس", "½ بصل", "2 كوب مرق خضار"]
                    },
                    nutrition: {
                        protein: 18,
                        carbs: 45,
                        fats: 5,
                        fiber: 15
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Hearty lentil soup with vegetables and whole grain bread. High in fiber and plant protein.", 
                        ar: "شوربة عدس غنية مع خضار وخبز قمح كامل. غنية بالألياف والبروتين النباتي." 
                    } 
                },
                { 
                    name: { en: "Tuna Salad", ar: "سلطة تونة" }, 
                    calories: 420, 
                    prepTime: 10,
                    cookTime: 0,
                    servings: 1,
                    ingredients: {
                        en: ["1 can tuna", "2 tbsp Greek yogurt", "1 celery stalk", "½ apple", "5 whole grain crackers"],
                        ar: ["1 علبة تونة", "2 ملعقة كبيرة زبادي يوناني", "1 ساق كرفس", "½ تفاحة", "5 كراكرز قمح كامل"]
                    },
                    nutrition: {
                        protein: 30,
                        carbs: 35,
                        fats: 15,
                        fiber: 6
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Tuna mixed with Greek yogurt, celery, and whole grain crackers. Omega-3 rich meal.", 
                        ar: "تونة ممزوجة مع زبادي يوناني وكرفس وكراكرز قمح كامل. وجبة غنية بأوميغا 3." 
                    } 
                }
            ],
            dinner: [
                { 
                    name: { en: "Grilled Salmon", ar: "سلمون مشوي" }, 
                    calories: 450, 
                    prepTime: 10,
                    cookTime: 15,
                    servings: 1,
                    ingredients: {
                        en: ["1 salmon fillet", "½ lb Brussels sprouts", "½ cup quinoa", "1 tbsp olive oil", "Lemon wedges"],
                        ar: ["1 قطعة سلمون", "½ رطل كرنب بروكسل", "½ كوب كينوا", "1 ملعقة كبيرة زيت زيتون", "أرباع ليمون"]
                    },
                    nutrition: {
                        protein: 35,
                        carbs: 40,
                        fats: 20,
                        fiber: 8
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Salmon fillet with roasted Brussels sprouts and quinoa. Excellent source of omega-3s.", 
                        ar: "قطعة سلمون مع كرنب بروكسل مشوي وكينوا. مصدر ممتاز لأوميغا 3." 
                    } 
                },
                { 
                    name: { en: "Chicken Stir Fry", ar: "دجاج سوتيه" }, 
                    calories: 480, 
                    prepTime: 15,
                    cookTime: 15,
                    servings: 1,
                    ingredients: {
                        en: ["1 chicken breast", "2 cups mixed vegetables", "1 cup brown rice noodles", "2 tbsp stir-fry sauce", "1 tsp sesame oil"],
                        ar: ["1 صدر دجاج", "2 كوب خضار متنوعة", "1 كوب نودلز أرز بني", "2 ملعقة كبيرة صلصة سوتيه", "1 ملعقة صغيرة زيت سمسم"]
                    },
                    nutrition: {
                        protein: 40,
                        carbs: 50,
                        fats: 15,
                        fiber: 8
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Chicken with mixed vegetables and brown rice noodles. Quick and balanced dinner.", 
                        ar: "دجاج مع خضار متنوعة ونودلز أرز بني. عشاء سريع ومتوازن." 
                    } 
                },
                // Additional dinner options with similar detailed structure
                { 
                    name: { en: "Vegetable Chili", ar: "تشيلي خضار" }, 
                    calories: 400, 
                    prepTime: 15,
                    cookTime: 30,
                    servings: 1,
                    ingredients: {
                        en: ["½ cup kidney beans", "½ cup black beans", "1 cup diced tomatoes", "½ onion", "1 tbsp chili powder"],
                        ar: ["½ كوب فاصوليا حمراء", "½ كوب فاصوليا سوداء", "1 كوب طماطم مقطعة", "½ بصل", "1 ملعقة كبيرة مسحوق تشيلي"]
                    },
                    nutrition: {
                        protein: 18,
                        carbs: 60,
                        fats: 5,
                        fiber: 20
                    },
                    healthRating: 5,
                    desc: { 
                        en: "Bean and vegetable chili with avocado topping. High-fiber plant-based meal.", 
                        ar: "تشيلي فاصوليا وخضار مع أفوكادو. وجبة نباتية غنية بالألياف." 
                    } 
                },
                { 
                    name: { en: "Beef and Vegetable Skewers", ar: "أسياخ لحم وخضار" }, 
                    calories: 460, 
                    prepTime: 20,
                    cookTime: 15,
                    servings: 1,
                    ingredients: {
                        en: ["4 oz beef sirloin", "1 bell pepper", "½ zucchini", "½ onion", "½ cup couscous"],
                        ar: ["4 أونصة لحم بقري", "1 فلفل رومي", "½ كوسة", "½ بصل", "½ كوب كسكس"]
                    },
                    nutrition: {
                        protein: 35,
                        carbs: 45,
                        fats: 15,
                        fiber: 6
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Grilled beef and vegetable skewers with couscous. Balanced macros with lean protein.", 
                        ar: "أسياخ لحم بقري وخضار مشوية مع كسكس. وجبة متوازنة مع بروتين خفيف." 
                    } 
                },
                { 
                    name: { en: "Stuffed Bell Peppers", ar: "فلفل رومي محشي" }, 
                    calories: 420, 
                    prepTime: 15,
                    cookTime: 30,
                    servings: 1,
                    ingredients: {
                        en: ["1 bell pepper", "¼ lb ground turkey", "½ cup cooked quinoa", "¼ cup tomato sauce", "1 oz cheese"],
                        ar: ["1 فلفل رومي", "¼ رطل لحم ديك رومي مفروم", "½ كوب كينوا مطبوخة", "¼ كوب صلصة طماطم", "1 أونصة جبنة"]
                    },
                    nutrition: {
                        protein: 30,
                        carbs: 35,
                        fats: 18,
                        fiber: 8
                    },
                    healthRating: 4,
                    desc: { 
                        en: "Bell peppers stuffed with lean ground turkey and quinoa. High-protein, low-carb option.", 
                        ar: "فلفل رومي محشي بتركي مفروم قليل الدهن وكينوا. خيار غني بالبروتين وقليل الكربوهيدرات." 
                    } 
                }
            ]
        };

        // Enhanced Workout plans with specific exercises
        const workouts = {
            beginner: [
                { 
                    day: { en: "Monday", ar: "الإثنين" }, 
                    workout: { 
                        en: "Full Body Strength & Cardio", 
                        ar: "تمارين القوة والقلب لكامل الجسم" 
                    },
                    exercises: [
                        {
                            name: { en: "Bodyweight Squats", ar: "قرفصاء وزن الجسم" },
                            setsReps: { en: "3 sets x 12 reps", ar: "3 مجموعات x 12 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Wall Push-ups", ar: "ضغط على الحائط" },
                            setsReps: { en: "3 sets x 10 reps", ar: "3 مجموعات x 10 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Seated Knee Raises", ar: "رفع ركبة جالس" },
                            setsReps: { en: "3 sets x 12 reps", ar: "3 مجموعات x 12 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Brisk Walk", ar: "مشي سريع" },
                            setsReps: { en: "20 minutes", ar: "20 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 2,
                    notes: {
                        en: "Focus on proper form. Modify exercises as needed.",
                        ar: "ركز على الأداء الصحيح. عدل التمارين حسب الحاجة."
                    }
                },
                { 
                    day: { en: "Tuesday", ar: "الثلاثاء" }, 
                    workout: { 
                        en: "Yoga & Mobility", 
                        ar: "يوجا وتمارين المرونة" 
                    },
                    exercises: [
                        {
                            name: { en: "Sun Salutations", ar: "تحية الشمس" },
                            setsReps: { en: "5 rounds", ar: "5 جولات" },
                            rest: { en: "30 sec between", ar: "30 ثانية بين الجولات" }
                        },
                        {
                            name: { en: "Cat-Cow Stretch", ar: "تمرين القطة-البقرة" },
                            setsReps: { en: "2 minutes", ar: "2 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Child's Pose", ar: "وضعية الطفل" },
                            setsReps: { en: "1 minute", ar: "1 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Seated Forward Fold", ar: "انحناء أمامي جالس" },
                            setsReps: { en: "1 minute per side", ar: "1 دقيقة لكل جانب" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 1,
                    notes: {
                        en: "Focus on deep breathing and gentle movement.",
                        ar: "ركز على التنفس العميق والحركة اللطيفة."
                    }
                },
                // Additional days with similar structure
                { 
                    day: { en: "Wednesday", ar: "الأربعاء" }, 
                    workout: { 
                        en: "Core & Cardio", 
                        ar: "تمارين البطن والقلب" 
                    },
                    exercises: [
                        {
                            name: { en: "Modified Plank", ar: "بلانك معدل" },
                            setsReps: { en: "3 sets x 20 sec", ar: "3 مجموعات x 20 ثانية" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "Seated Knee Tucks", ar: "ضم الركبة جالس" },
                            setsReps: { en: "3 sets x 10 reps", ar: "3 مجموعات x 10 تكرار" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "Brisk Walk", ar: "مشي سريع" },
                            setsReps: { en: "20 minutes", ar: "20 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 2,
                    notes: {
                        en: "Engage core throughout. Stop if you feel any back pain.",
                        ar: "اشغل عضلات البطن طوال الوقت. توقف إذا شعرت بأي ألم في الظهر."
                    }
                },
                { 
                    day: { en: "Thursday", ar: "الخميس" }, 
                    workout: { 
                        en: "Rest or Light Stretching", 
                        ar: "راحة أو تمارين إطالة خفيفة" 
                    },
                    exercises: [
                        {
                            name: { en: "Neck Rolls", ar: "لف الرقبة" },
                            setsReps: { en: "1 minute", ar: "1 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Shoulder Rolls", ar: "لف الكتفين" },
                            setsReps: { en: "1 minute", ar: "1 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Seated Forward Fold", ar: "انحناء أمامي جالس" },
                            setsReps: { en: "1 minute", ar: "1 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 1,
                    notes: {
                        en: "Active recovery day. Focus on relaxation and mobility.",
                        ar: "يوم تعافي نشط. ركز على الاسترخاء والمرونة."
                    }
                },
                { 
                    day: { en: "Friday", ar: "الجمعة" }, 
                    workout: { 
                        en: "Walk/Jog Intervals", 
                        ar: "فترات مشي/هرولة" 
                    },
                    exercises: [
                        {
                            name: { en: "Brisk Walk", ar: "مشي سريع" },
                            setsReps: { en: "2 minutes", ar: "2 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Slow Jog", ar: "هرولة بطيئة" },
                            setsReps: { en: "1 minute", ar: "1 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Repeat 5 times", ar: "كرر 5 مرات" },
                            setsReps: { en: "Total 15 minutes", ar: "المجموع 15 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        },
                        {
                            name: { en: "Cool Down Walk", ar: "مشي تبريد" },
                            setsReps: { en: "5 minutes", ar: "5 دقائق" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 2,
                    notes: {
                        en: "Go at your own pace. Jog should be comfortable.",
                        ar: "اذهب بسرعتك الخاصة. الهرولة يجب أن تكون مريحة."
                    }
                }
            ],
            intermediate: [
                { 
                    day: { en: "Monday", ar: "الإثنين" }, 
                    workout: { 
                        en: "Upper Body Strength", 
                        ar: "تمارين قوة الجزء العلوي" 
                    },
                    exercises: [
                        {
                            name: { en: "Push-ups", ar: "تمارين ضغط" },
                            setsReps: { en: "4 sets x 12 reps", ar: "4 مجموعات x 12 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Dumbbell Rows", ar: "تمارين سحب دمبل" },
                            setsReps: { en: "4 sets x 10 reps/side", ar: "4 مجموعات x 10 تكرار/جانب" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Shoulder Press", ar: "ضغط كتفين" },
                            setsReps: { en: "3 sets x 10 reps", ar: "3 مجموعات x 10 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Plank", ar: "تمرين بلانك" },
                            setsReps: { en: "3 sets x 30 sec", ar: "3 مجموعات x 30 ثانية" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        }
                    ],
                    intensity: 3,
                    notes: {
                        en: "Use challenging weights. Maintain strict form.",
                        ar: "استخدم أوزاناً صعبة. حافظ على الأداء الصحيح."
                    }
                },
                // Additional intermediate workouts
                { 
                    day: { en: "Tuesday", ar: "الثلاثاء" }, 
                    workout: { 
                        en: "HIIT Cardio", 
                        ar: "تمارين HIIT القلبية" 
                    },
                    exercises: [
                        {
                            name: { en: "Jump Squats", ar: "قرفصاء قفز" },
                            setsReps: { en: "30 sec work", ar: "30 ثانية عمل" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "Mountain Climbers", ar: "متسلقو الجبال" },
                            setsReps: { en: "30 sec work", ar: "30 ثانية عمل" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "Burpees", ar: "تمارين بيربي" },
                            setsReps: { en: "30 sec work", ar: "30 ثانية عمل" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "High Knees", ar: "ركب عالية" },
                            setsReps: { en: "30 sec work", ar: "30 ثانية عمل" },
                            rest: { en: "30 sec rest", ar: "30 ثانية راحة" }
                        },
                        {
                            name: { en: "Repeat 3 rounds", ar: "كرر 3 جولات" },
                            setsReps: { en: "Total 12 minutes", ar: "المجموع 12 دقيقة" },
                            rest: { en: "None", ar: "لا يوجد" }
                        }
                    ],
                    intensity: 4,
                    notes: {
                        en: "Go all out during work periods. Modify if needed.",
                        ar: "أعط كل ما لديك خلال فترات العمل. عدل إذا لزم الأمر."
                    }
                }
            ],
            advanced: [
                { 
                    day: { en: "Monday", ar: "الإثنين" }, 
                    workout: { 
                        en: "Leg Day", 
                        ar: "يوم الأرجل" 
                    },
                    exercises: [
                        {
                            name: { en: "Barbell Back Squats", ar: "قرفصاء بار خلفي" },
                            setsReps: { en: "5 sets x 5 reps", ar: "5 مجموعات x 5 تكرار" },
                            rest: { en: "2 min rest", ar: "2 دقيقة راحة" }
                        },
                        {
                            name: { en: "Romanian Deadlifts", ar: "رفعة رومانية" },
                            setsReps: { en: "4 sets x 8 reps", ar: "4 مجموعات x 8 تكرار" },
                            rest: { en: "90 sec rest", ar: "90 ثانية راحة" }
                        },
                        {
                            name: { en: "Bulgarian Split Squats", ar: "قرفصاء بلغارية" },
                            setsReps: { en: "3 sets x 10 reps/leg", ar: "3 مجموعات x 10 تكرار/رجل" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Calf Raises", ar: "رفع ربلة الساق" },
                            setsReps: { en: "4 sets x 15 reps", ar: "4 مجموعات x 15 تكرار" },
                            rest: { en: "45 sec rest", ar: "45 ثانية راحة" }
                        }
                    ],
                    intensity: 5,
                    notes: {
                        en: "Use heavy weights with proper form. Spotter recommended for squats.",
                        ar: "استخدم أوزاناً ثقيلة مع الأداء الصحيح. يوصى بوجود مراقب للقرفصاء."
                    }
                },
                // Additional advanced workouts
                { 
                    day: { en: "Tuesday", ar: "الثلاثاء" }, 
                    workout: { 
                        en: "HIIT & Core", 
                        ar: "تمارين HIIT والبطن" 
                    },
                    exercises: [
                        {
                            name: { en: "Sprint Intervals", ar: "فترات عدو سريع" },
                            setsReps: { en: "30 sec sprint", ar: "30 ثانية عدو سريع" },
                            rest: { en: "90 sec walk", ar: "90 ثانية مشي" }
                        },
                        {
                            name: { en: "Hanging Leg Raises", ar: "رفع رجل معلق" },
                            setsReps: { en: "4 sets x 12 reps", ar: "4 مجموعات x 12 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        },
                        {
                            name: { en: "Russian Twists", ar: "لف روسي" },
                            setsReps: { en: "3 sets x 20 reps/side", ar: "3 مجموعات x 20 تكرار/جانب" },
                            rest: { en: "45 sec rest", ar: "45 ثانية راحة" }
                        },
                        {
                            name: { en: "Plank to Push-up", ar: "بلانك إلى ضغط" },
                            setsReps: { en: "3 sets x 10 reps", ar: "3 مجموعات x 10 تكرار" },
                            rest: { en: "60 sec rest", ar: "60 ثانية راحة" }
                        }
                    ],
                    intensity: 5,
                    notes: {
                        en: "Max effort on sprints. Controlled movements for core work.",
                        ar: "أقصى جهد في العدو السريع. حركات متحكم بها لتمارين البطن."
                    }
                }
            ]
        };

        // Generate meal plans
        function generateMealPlans(calories) {
            // Clear existing meal plans
            document.querySelectorAll('.meal-plan').forEach(plan => {
                plan.innerHTML = '';
            });
            
            // Adjust meals based on calorie needs
            const calorieRange = getCalorieRange(calories);
            
            // Generate breakfast meals
            const filteredBreakfast = filterMealsByCalories(meals.breakfast, calorieRange.breakfast);
            const breakfastContainer = document.querySelector('#breakfast .meal-plan');
            filteredBreakfast.forEach(meal => {
                breakfastContainer.appendChild(createMealCard(meal));
            });
            
            // Generate lunch meals
            const filteredLunch = filterMealsByCalories(meals.lunch, calorieRange.lunch);
            const lunchContainer = document.querySelector('#lunch .meal-plan');
            filteredLunch.forEach(meal => {
                lunchContainer.appendChild(createMealCard(meal));
            });
            
            // Generate dinner meals
            const filteredDinner = filterMealsByCalories(meals.dinner, calorieRange.dinner);
            const dinnerContainer = document.querySelector('#dinner .meal-plan');
            filteredDinner.forEach(meal => {
                dinnerContainer.appendChild(createMealCard(meal));
            });
            
            // Generate workout plans
            generateWorkoutPlans();
        }

        // Filter meals by calorie range
        function filterMealsByCalories(meals, range) {
            // Get meals closest to the target calories
            return [...meals]
                .sort((a, b) => Math.abs(a.calories - (range.min + range.max)/2) - Math.abs(b.calories - (range.min + range.max)/2));
        }

        // Get calorie ranges based on total daily calories
        function getCalorieRange(totalCalories) {
            // Default distribution: 25% breakfast, 35% lunch, 40% dinner
            return {
                breakfast: {
                    min: Math.round(totalCalories * 0.2),
                    max: Math.round(totalCalories * 0.3)
                },
                lunch: {
                    min: Math.round(totalCalories * 0.3),
                    max: Math.round(totalCalories * 0.4)
                },
                dinner: {
                    min: Math.round(totalCalories * 0.35),
                    max: Math.round(totalCalories * 0.45)
                }
            };
        }

        // Create meal card element with enhanced details
        function createMealCard(meal) {
            const card = document.createElement('div');
            card.className = 'meal-card';
            
            const mealName = currentLang === 'en' ? meal.name.en : meal.name.ar;
            const mealDesc = currentLang === 'en' ? meal.desc.en : meal.desc.ar;
            
            // Health tag
            let healthTag = '';
            if (meal.healthRating >= 4) {
                healthTag = `<span class="health-tag">${currentLang === 'en' ? 'Very Healthy' : 'صحي جداً'}</span>`;
            } else if (meal.healthRating >= 3) {
                healthTag = `<span class="health-tag">${currentLang === 'en' ? 'Healthy' : 'صحي'}</span>`;
            }
            
            // Ingredients list
            const ingredientsList = meal.ingredients[currentLang].map(ing => `<li>${ing}</li>`).join('');
            
            // Nutrition info
            const nutritionInfo = `
                <div class="detail-row">
                    <span class="detail-label">${translations[currentLang]['protein']}:</span>
                    <span>${meal.nutrition.protein}g</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">${translations[currentLang]['carbs']}:</span>
                    <span>${meal.nutrition.carbs}g</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">${translations[currentLang]['fats']}:</span>
                    <span>${meal.nutrition.fats}g</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">${translations[currentLang]['fiber']}:</span>
                    <span>${meal.nutrition.fiber}g</span>
                </div>
            `;
            
            card.innerHTML = `
                ${healthTag}
                <h3>${mealName}</h3>
                <p>${mealDesc}</p>
                
                <div class="meal-details">
                    <div class="detail-row">
                        <span class="detail-label">${translations[currentLang]['calories']}:</span>
                        <span>${meal.calories}</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">${translations[currentLang]['prepTime']}:</span>
                        <span>${meal.prepTime} min</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">${translations[currentLang]['cookTime']}:</span>
                        <span>${meal.cookTime} min</span>
                    </div>
                    <div class="detail-row">
                        <span class="detail-label">${translations[currentLang]['servings']}:</span>
                        <span>${meal.servings}</span>
                    </div>
                    
                    <h4>${translations[currentLang]['ingredients']}</h4>
                    <ul>${ingredientsList}</ul>
                    
                    <h4>${translations[currentLang]['nutrition']}</h4>
                    ${nutritionInfo}
                </div>
            `;
            
            return card;
        }

        // Generate workout plans
        function generateWorkoutPlans() {
            // Clear existing workout plans
            document.querySelectorAll('.workout-plan').forEach(plan => {
                plan.innerHTML = '';
            });
            
            // Generate beginner workout
            const beginnerContainer = document.querySelector('#beginner .workout-plan');
            workouts.beginner.forEach(workout => {
                beginnerContainer.appendChild(createWorkoutCard(workout));
            });
            
            // Generate intermediate workout
            const intermediateContainer = document.querySelector('#intermediate .workout-plan');
            workouts.intermediate.forEach(workout => {
                intermediateContainer.appendChild(createWorkoutCard(workout));
            });
            
            // Generate advanced workout
            const advancedContainer = document.querySelector('#advanced .workout-plan');
            workouts.advanced.forEach(workout => {
                advancedContainer.appendChild(createWorkoutCard(workout));
            });
        }

        // Create workout card element with enhanced details
        function createWorkoutCard(workout) {
            const card = document.createElement('div');
            card.className = 'workout-card';
            
            const day = currentLang === 'en' ? workout.day.en : workout.day.ar;
            const workoutName = currentLang === 'en' ? workout.workout.en : workout.workout.ar;
            const notes = currentLang === 'en' ? workout.notes.en : workout.notes.ar;
            
            // Intensity indicator
            const intensityDots = [];
            for (let i = 1; i <= 5; i++) {
                intensityDots.push(`<div class="intensity-dot ${i <= workout.intensity ? 'filled' : ''}"></div>`);
            }
            
            // Exercises list
            const exercisesList = workout.exercises.map(exercise => {
                const name = currentLang === 'en' ? exercise.name.en : exercise.name.ar;
                const setsReps = currentLang === 'en' ? exercise.setsReps.en : exercise.setsReps.ar;
                const rest = currentLang === 'en' ? exercise.rest.en : exercise.rest.ar;
                
                return `
                    <div class="exercise-item">
                        <div class="exercise-name">${name}</div>
                        <div class="exercise-details">
                            <span>${setsReps}</span>
                            <span>${rest}</span>
                        </div>
                    </div>
                `;
            }).join('');
            
            card.innerHTML = `
                <h3>${day}: ${workoutName}</h3>
                
                <div class="intensity-indicator">
                    <span class="detail-label">${translations[currentLang]['intensity']}:</span>
                    ${intensityDots.join('')}
                    <span>${getIntensityText(workout.intensity)}</span>
                </div>
                
                <h4>${translations[currentLang]['exercises']}</h4>
                <div class="exercise-list">
                    ${exercisesList}
                </div>
                
                <div class="workout-details">
                    <h4>${translations[currentLang]['notes']}</h4>
                    <p>${notes}</p>
                </div>
            `;
            
            return card;
        }

        // Helper function to get intensity text
        function getIntensityText(level) {
            if (level <= 2) return translations[currentLang]['low'];
            if (level <= 4) return translations[currentLang]['medium'];
            return translations[currentLang]['high'];
        }

        // Initialize the page
        window.addEventListener('DOMContentLoaded', function() {
            // Load saved user data
            loadUserData();
            
            // Generate default meal plans if no saved data
            if (!localStorage.getItem('fitnessUserData')) {
                generateMealPlans(2000);
            }
            
            // Set initial language if saved
            const savedData = localStorage.getItem('fitnessUserData');
            if (savedData) {
                const data = JSON.parse(savedData);
                if (data.lang === 'ar') {
                    document.getElementById('translateBtn').click();
                }
            }
        });
    </script>
</body>
</html>
